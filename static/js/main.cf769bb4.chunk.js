(this["webpackJsonpemoji-weather-map"]=this["webpackJsonpemoji-weather-map"]||[]).push([[0],[,function(e,a,t){e.exports=t.p+"static/media/EmojiWeatherMapEmojiLoading.137847d1.svg"},,,function(e,a,t){e.exports=t(15)},,,,,,function(e,a,t){},function(e,a,t){},function(e,a,t){},function(e,a,t){},function(e,a,t){},function(e,a,t){"use strict";t.r(a);var n=t(0),r=t.n(n),s=t(3),o=t.n(s);t(9),t(10);const i=Object(n.createContext)();t(11);class l extends n.Component{constructor(e){super(e),this.templateBaseUrl="/emojis-weather-map/templates/",this.state={selectedTemplate:"france.json"},this.handleChange=this.handleChange.bind(this)}handleChange(e){const a=e.target.value,t=this.templateBaseUrl+a;this.setState(e=>(this.props.onMapSelected(t),{selectedTemplate:a}))}componentDidMount(){const{selectedTemplate:e}=this.state,a=this.templateBaseUrl+e;this.props.onMapSelected(a)}render(){const{isLoadingTemplate:e}=this.props;return r.a.createElement("div",{className:"EmojiWeatherMapSelector"},r.a.createElement("div",{className:"form-group row"},r.a.createElement("label",{htmlFor:"mapSelector",className:"col-12 col-form-label"},"Country"),r.a.createElement("div",{className:"col-12"},r.a.createElement("select",{disabled:e,value:this.state.selectedTemplate,onChange:this.handleChange,className:"form-control",id:"mapSelector",name:"mapSelector"},r.a.createElement("option",{value:"france.json"},"\ud83c\uddeb\ud83c\uddf7 France")))))}}var c=l,d=t(1),p=t.n(d);t(12);class m extends n.Component{render(){const{displayLoadingIcon:e,onMapSelected:a,isLoadingTemplate:t}=this.props;return r.a.createElement(r.a.Fragment,null,r.a.createElement("div",{className:"EmojiWeatherMapSettings"},r.a.createElement("h1",{className:"EmojiWeatherMapSettings__AppTitle"},e?r.a.createElement("img",{alt:"Loading",src:p.a}):""," ","Emoji Weather Map"),r.a.createElement("div",{className:"EmojiWeatherMapSettings__SettingsList"},r.a.createElement(c,{onMapSelected:a,isLoadingTemplate:t}))))}}var h=m;class g extends n.Component{render(){let e=[];for(let a=0;a<this.props.length;a++)e.push(r.a.createElement("span",{key:a,className:"emojiWeatherMap__offsetSpace"},"\xa0"));return e}}var u=g;class E extends n.Component{constructor(e){super(e),this.state={isLoading:!1,currentWeatherIcon:null}}getCurrentWeatherIcon(e){let a;switch(e){case"01d":a="\u2600\ufe0f";break;case"01n":a="\ud83c\udf15";break;case"02d":a="\ud83c\udf24\ufe0f";break;case"02n":a="\u2601\ufe0f";break;case"03d":a="\u26c5";break;case"03n":case"04d":case"04n":a="\u2601\ufe0f";break;case"09d":a="\ufe0f\ufe0f\ud83c\udf27\ufe0f";break;case"09n":a="\ud83c\udf27\ufe0f";break;case"10d":a="\ufe0f\ufe0f\ud83c\udf26\ufe0f";break;case"10n":a="\ud83c\udf27\ufe0f";break;case"11d":a="\ufe0f\ufe0f\u26c8\ufe0f";break;case"11n":a="\u26c8\ufe0f";break;case"13d":a="\ufe0f\ufe0f\ud83c\udf28\ufe0f";break;case"13n":a="\ud83c\udf28\ufe0f";break;case"50d":a="\ufe0f\ufe0f\ud83c\udf2b\ufe0f";break;case"50n":a="\ud83c\udf2b\ufe0f";break;default:a="\u274c"}return a}getCurrentWeatherLabel(e){let a;switch(e){case"01d":case"01n":a="Clear Sky";break;case"02d":case"02n":a="Few Clouds";break;case"03d":case"03n":a="Scattered Clouds";break;case"04d":case"04n":a="Broken Clouds";break;case"09d":case"09n":a="Shower Rain";break;case"10d":case"10n":a="Rain";break;case"11d":case"11n":a="Thunderstorm";break;case"13d":case"13n":a="Snow";break;case"50d":case"50n":a="Mist";break;default:a="Error"}return a}componentDidMount(){this.dataProviderEndpoint=this.context+"?latitude="+this.props.geographicCoordinates.latitude+"&longitude="+this.props.geographicCoordinates.longitude,this.setState(()=>(this.props.onLoading(),{isLoading:!0})),fetch(this.dataProviderEndpoint).then(e=>e.text()).then(e=>{this.setState(a=>(this.props.onLoaded(),{isLoading:!1,currentWeatherIcon:this.getCurrentWeatherIcon(e),currentWeatherLabel:this.getCurrentWeatherLabel(e)}))})}render(){const{isLoading:e,currentWeatherIcon:a,currentWeatherLabel:t}=this.state;return e?r.a.createElement("span",{className:"emojiWeatherMap__emojiLoading",role:"img","aria-label":"Loading"},r.a.createElement("img",{alt:"emoji",src:p.a})):r.a.createElement("span",{className:"emojiWeatherMap__emoji",role:"img","aria-label":t},a)}}E.contextType=i;var b=E;class L extends n.Component{render(){return r.a.createElement("div",{className:"emojiWeatherMap__row"},this.props.row.items.map((e,a)=>{let t=null;return"offset"===e.type?t=r.a.createElement(u,{key:a,length:e.length}):"emoji"===e.type&&(t=r.a.createElement(b,{key:a,geographicCoordinates:e.geographicCoordinates,onLoading:this.props.onLoading,onLoaded:this.props.onLoaded})),t}))}}var k=L;t(13);class v extends n.Component{render(){return r.a.createElement(r.a.Fragment,null,r.a.createElement("div",{className:"emojiWeatherMap"},this.props.template.rows.map((e,a)=>r.a.createElement(k,{key:a,row:e,onLoading:this.props.onLoading,onLoaded:this.props.onLoaded}))))}}var S=v;t(14);class C extends n.Component{constructor(e){super(e),this.handleLoadingActionStart=this.handleLoadingActionStart.bind(this),this.handleLoadingActionEnd=this.handleLoadingActionEnd.bind(this),this.handleSelectedMap=this.handleSelectedMap.bind(this),this.state={emojiWeatherMapTemplate:null,isLoadingTemplate:!1,loadingActionsCount:0},this.apiBaseUrl="https://giovanetti.fr/ewm-data-provider/"}handleLoadingActionStart(){this.setState(e=>({loadingActionsCount:e.loadingActionsCount+1}))}handleLoadingActionEnd(){this.setState(e=>({loadingActionsCount:e.loadingActionsCount-1}))}handleSelectedMap(e){this.setState({isLoadingTemplate:!0}),fetch(e).then(e=>e.json()).then(e=>{this.setState({emojiWeatherMapTemplate:e,isLoadingTemplate:!1})})}render(){const{emojiWeatherMapTemplate:e,isLoadingTemplate:a,loadingActionsCount:t}=this.state;let n;return n=a||!e?r.a.createElement("p",null,"Loading map..."):r.a.createElement(S,{template:e,onLoading:this.handleLoadingActionStart,onLoaded:this.handleLoadingActionEnd}),r.a.createElement(i.Provider,{value:this.apiBaseUrl},r.a.createElement("div",{className:"App"},r.a.createElement("div",{className:"container"},r.a.createElement("div",{className:"row align-items-center App__body"},r.a.createElement("div",{className:"col-12 App__settings"},r.a.createElement(h,{displayLoadingIcon:t>0,onMapSelected:this.handleSelectedMap,isLoadingTemplate:a})),r.a.createElement("div",{className:"col-12 App__mapView"},n),r.a.createElement("div",{className:"col-12 App__footer"},r.a.createElement("hr",null),r.a.createElement("p",null,"2018 - A simple React app made by"," ",r.a.createElement("a",{href:"https://www.giovanetti.fr/",rel:"noopener noreferrer",target:"_blank"},"Romain Giovanetti")," ","-"," ",r.a.createElement("a",{href:"https://github.com/ganoninc/emojis-weather-map",rel:"noopener noreferrer",target:"_blank"},"View source")))))))}}var f=C;Boolean("localhost"===window.location.hostname||"[::1]"===window.location.hostname||window.location.hostname.match(/^127(?:\.(?:25[0-5]|2[0-4][0-9]|[01]?[0-9][0-9]?)){3}$/));o.a.render(r.a.createElement(n.StrictMode,null,r.a.createElement(f,null)),document.getElementById("root")),"serviceWorker"in navigator&&navigator.serviceWorker.ready.then(e=>{e.unregister()})}],[[4,1,2]]]);
//# sourceMappingURL=main.cf769bb4.chunk.js.map